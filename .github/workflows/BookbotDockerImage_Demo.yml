name: Build and Export BookbotDockerImage_Demo

on:
  push:
    branches:
      - main

jobs:
  build-and-export:
    runs-on: ubuntu-latest
    steps:
      - name: 检出主分支代码
        uses: actions/checkout@v3

      - name: 使用Dockerfile构建镜像
        run: |
          docker build -t bookbotdockerimage_demo .

      - name: 导出镜像为tar包
        run: |
          docker save -o BookbotDockerImage_Demo.tar bookbotdockerimage_demo

      - name: 上传镜像tar包为构建产物
        uses: actions/upload-artifact@v4
        with:
          name: BookbotDockerImage_Demo
          path: BookbotDockerImage_Demo.tar
